SOURCES := $(wildcard ./ufo/*.ufo)

OTFS := $(patsubst ./ufo/%.ufo,./autogenerated/otf/%.otf,$(SOURCES))
TTFS := $(patsubst ./ufo/%.ufo,./autogenerated/ttf/%.ttf,$(SOURCES))
WOFFS := $(patsubst ./ufo/%.ufo,./autogenerated/woff/%.woff,$(SOURCES))
WOFF2S := $(patsubst ./ufo/%.ufo,./autogenerated/woff2/%.woff2,$(SOURCES))

all: $(OTFS) $(TTFS) $(WOFFS) $(WOFF2S)

autogenerated/otf/%.otf: ufo/%.ufo
	@mkdir -p $(@D)
	fontforge -c 'open(argv[1]).generate(argv[2])' $< $@

autogenerated/ttf/%.ttf: ufo/%.ufo
	@mkdir -p $(@D)
	fontforge -c 'open(argv[1]).generate(argv[2])' $< $@

autogenerated/woff/%.woff: ufo/%.ufo
	@mkdir -p $(@D)
	fontforge -c 'open(argv[1]).generate(argv[2])' $< $@

autogenerated/woff2/%.woff2: ufo/%.ufo
	@mkdir -p $(@D)
	fontforge -c 'open(argv[1]).generate(argv[2])' $< $@
